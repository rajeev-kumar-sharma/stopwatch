!function(t){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).stopwatchJs=t()}}(function(){return function t(e,n,r){function i(o,u){if(!n[o]){if(!e[o]){var h="function"==typeof require&&require;if(!u&&h)return h(o,!0);if(s)return s(o,!0);var a=new Error("Cannot find module '"+o+"'");throw a.code="MODULE_NOT_FOUND",a}var p=n[o]={exports:{}};e[o][0].call(p.exports,function(t){var n=e[o][1][t];return i(n||t)},p,p.exports,t,e,n,r)}return n[o].exports}for(var s="function"==typeof require&&require,o=0;o<r.length;o++)i(r[o]);return i}({1:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=t("./lib/stopwatch");n.Stopwatch=r.Stopwatch;var i=t("./lib/output");n.Output=i.Output},{"./lib/output":2,"./lib/stopwatch":3}],2:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});!function(t){t[t.String=0]="String",t[t.Array=1]="Array"}(n.Output||(n.Output={}))},{}],3:[function(t,e,n){"use strict";var r=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),i=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))(function(i,s){function o(t){try{h(r.next(t))}catch(t){s(t)}}function u(t){try{h(r.throw(t))}catch(t){s(t)}}function h(t){t.done?i(t.value):new n(function(e){e(t.value)}).then(o,u)}h((r=r.apply(t,e||[])).next())})},s=this&&this.__generator||function(t,e){function n(n){return function(o){return function(n){if(r)throw new TypeError("Generator is already executing.");for(;u;)try{if(r=1,i&&(s=i[2&n[0]?"return":n[0]?"throw":"next"])&&!(s=s.call(i,n[1])).done)return s;switch(i=0,s&&(n=[0,s.value]),n[0]){case 0:case 1:s=n;break;case 4:return u.label++,{value:n[1],done:!1};case 5:u.label++,i=n[1],n=[0];continue;case 7:n=u.ops.pop(),u.trys.pop();continue;default:if(s=u.trys,!(s=s.length>0&&s[s.length-1])&&(6===n[0]||2===n[0])){u=0;continue}if(3===n[0]&&(!s||n[1]>s[0]&&n[1]<s[3])){u.label=n[1];break}if(6===n[0]&&u.label<s[1]){u.label=s[1],s=n;break}if(s&&u.label<s[2]){u.label=s[2],u.ops.push(n);break}s[2]&&u.ops.pop(),u.trys.pop();continue}n=e.call(t,u)}catch(t){n=[6,t],i=0}finally{r=s=0}if(5&n[0])throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}([n,o])}}var r,i,s,o,u={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return o={next:n(0),throw:n(1),return:n(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o};Object.defineProperty(n,"__esModule",{value:!0});var o=t("events"),u=t("./output"),h=function(t){function e(e){var n=t.call(this)||this;return n._elapsed=0,n._laps=[],n._output=u.Output.String,n._running=!1,n._timer=["00","00","00","00"],e&&(n._output=e),n._emitter=new o.EventEmitter,n}return r(e,t),e.prototype.start=function(t){if(this._running)throw new Error("The stopwatch is already running!");this._running=!0,this._startTime=Date.now(),this.register(t),this.measure()},e.prototype.stop=function(){if(!this._running)throw new Error("You must start the timer first!");this._running=!1},e.prototype.reset=function(){this._running=!1,this._laps=[],this._timer=["00","00","00","00"],this._elapsed=0,this._emitter.removeAllListeners()},e.prototype.lap=function(){if(!this._running)throw new Error("You must start the timer first!");var t=this._elapsed-this._laps.reduce(function(t,e){return t+e},0);return this._laps.push(t),this.output(this.format(t))},e.prototype.measure=function(){return i(this,void 0,void 0,function(){return s(this,function(t){switch(t.label){case 0:return this._running?[4,this.sleep(10)]:[2];case 1:return t.sent(),this._elapsed=Date.now()-this._startTime,this._timer=this.format(this._elapsed),this._emitter.emit("running"),this.measure(),[2]}})})},e.prototype.sleep=function(t){return new Promise(function(e){return setTimeout(e,t)})},e.prototype.register=function(t){var e=this;this._emitter.on("running",function(){t(e.output(e._timer))})},e.prototype.output=function(t){if(this._output===u.Output.String)return t.join(":");if(this._output===u.Output.Array)return t;throw new Error("Output format not supported!")},e.prototype.format=function(t){var e=parseInt(String(t/10),10),n=parseInt(String(e/100),10),r=parseInt(String(n/60),10),i=parseInt(String(r/60),10);return[this.pad(i),this.pad(r%60),this.pad(n%60),this.pad(e%100)]},e.prototype.pad=function(t){var e=String(t);return new Array(2-e.length+1).join("0")+e},e}(o.EventEmitter);n.Stopwatch=h},{"./output":2,events:4}],4:[function(t,e,n){function r(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function i(t){return"function"==typeof t}function s(t){return"object"==typeof t&&null!==t}function o(t){return void 0===t}e.exports=r,r.EventEmitter=r,r.prototype._events=void 0,r.prototype._maxListeners=void 0,r.defaultMaxListeners=10,r.prototype.setMaxListeners=function(t){if(!function(t){return"number"==typeof t}(t)||t<0||isNaN(t))throw TypeError("n must be a positive number");return this._maxListeners=t,this},r.prototype.emit=function(t){var e,n,r,u,h,a;if(this._events||(this._events={}),"error"===t&&(!this._events.error||s(this._events.error)&&!this._events.error.length)){if((e=arguments[1])instanceof Error)throw e;var p=new Error('Uncaught, unspecified "error" event. ('+e+")");throw p.context=e,p}if(n=this._events[t],o(n))return!1;if(i(n))switch(arguments.length){case 1:n.call(this);break;case 2:n.call(this,arguments[1]);break;case 3:n.call(this,arguments[1],arguments[2]);break;default:u=Array.prototype.slice.call(arguments,1),n.apply(this,u)}else if(s(n))for(u=Array.prototype.slice.call(arguments,1),r=(a=n.slice()).length,h=0;h<r;h++)a[h].apply(this,u);return!0},r.prototype.addListener=function(t,e){var n;if(!i(e))throw TypeError("listener must be a function");return this._events||(this._events={}),this._events.newListener&&this.emit("newListener",t,i(e.listener)?e.listener:e),this._events[t]?s(this._events[t])?this._events[t].push(e):this._events[t]=[this._events[t],e]:this._events[t]=e,s(this._events[t])&&!this._events[t].warned&&(n=o(this._maxListeners)?r.defaultMaxListeners:this._maxListeners)&&n>0&&this._events[t].length>n&&(this._events[t].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[t].length),"function"==typeof console.trace&&console.trace()),this},r.prototype.on=r.prototype.addListener,r.prototype.once=function(t,e){function n(){this.removeListener(t,n),r||(r=!0,e.apply(this,arguments))}if(!i(e))throw TypeError("listener must be a function");var r=!1;return n.listener=e,this.on(t,n),this},r.prototype.removeListener=function(t,e){var n,r,o,u;if(!i(e))throw TypeError("listener must be a function");if(!this._events||!this._events[t])return this;if(n=this._events[t],o=n.length,r=-1,n===e||i(n.listener)&&n.listener===e)delete this._events[t],this._events.removeListener&&this.emit("removeListener",t,e);else if(s(n)){for(u=o;u-- >0;)if(n[u]===e||n[u].listener&&n[u].listener===e){r=u;break}if(r<0)return this;1===n.length?(n.length=0,delete this._events[t]):n.splice(r,1),this._events.removeListener&&this.emit("removeListener",t,e)}return this},r.prototype.removeAllListeners=function(t){var e,n;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[t]&&delete this._events[t],this;if(0===arguments.length){for(e in this._events)"removeListener"!==e&&this.removeAllListeners(e);return this.removeAllListeners("removeListener"),this._events={},this}if(n=this._events[t],i(n))this.removeListener(t,n);else if(n)for(;n.length;)this.removeListener(t,n[n.length-1]);return delete this._events[t],this},r.prototype.listeners=function(t){return this._events&&this._events[t]?i(this._events[t])?[this._events[t]]:this._events[t].slice():[]},r.prototype.listenerCount=function(t){if(this._events){var e=this._events[t];if(i(e))return 1;if(e)return e.length}return 0},r.listenerCount=function(t,e){return t.listenerCount(e)}},{}]},{},[1])(1)});
